<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Healthify Lab</title>
  <link rel="stylesheet" href="styles/style.css" />
</head>
<body>

  <header class="hero">
    <img src="public/logo.png" alt="Healthify Lab" class="logo" />
    <h1>Accurate • Reliable • Healthify</h1>
  </header>

  <section class="search">
    <input type="text" placeholder="Search test or profile..." />
  </section>

  <section class="features">
    <div class="feature">
      <h3>Home Sample Collection</h3>
      <p>Easy and reliable collection from your doorstep.</p>
    </div>
    <div class="feature">
      <h3>Certified Lab Reports</h3>
      <p>Reports reviewed by medical professionals.</p>
    </div>
    <div class="feature">
      <h3>Affordable Packages</h3>
      <p>Exclusive offers on complete health checkups.</p>
    </div>
  </section>

  <!-- Featured Promo Cards -->
  <section class="slider-section">
    <h2>Featured Promo Profiles</h2>
    <div id="featured-carousel" class="carousel"></div>
  </section>

  <!-- Profile Promo Cards -->
  <section class="slider-section">
    <h2>Popular Health Profiles</h2>
    <div id="profile-carousel" class="carousel"></div>
  </section>

  <section class="testimonials">
    <h2>Trusted by Thousands</h2>
    <p>Real feedback from our satisfied patients across India.</p>
  </section>

  <section class="ai-section">
    <h2>Smart AI Assistant</h2>
    <p>Try our AI-powered assistant for report explanation and profile suggestions.</p>
    <a href="/ai" class="btn">Try Now</a>
  </section>

  <footer>
    <p>&copy; 2025 Healthify Lab. All rights reserved.</p>
  </footer>

  <!-- Embedded JavaScript -->
  <script>
    async function loadProfiles() {
      try {
        const response = await fetch('data/profiles.json');
        const profiles = await response.json();

        const featured = profiles.slice(0, 13);
        const others = profiles.slice(13, 25);

        const featuredContainer = document.getElementById("featured-carousel");
        const profileContainer = document.getElementById("profile-carousel");

        const createCard = (profile) => {
          const card = document.createElement("div");
          card.className = "card";

          const img = document.createElement("img");
          img.src = `public/${profile.image || profile.id || 'default'}.jpg`;
          img.alt = profile.name;

          const title = document.createElement("h3");
          title.textContent = profile.name;

          card.appendChild(img);
          card.appendChild(title);
          return card;
        };

        featured.forEach(p => featuredContainer.appendChild(createCard(p)));
        others.forEach(p => profileContainer.appendChild(createCard(p)));

        // Auto-scroll every second
        setInterval(() => {
          featuredContainer.scrollLeft += 170;
          if (featuredContainer.scrollLeft + featuredContainer.clientWidth >= featuredContainer.scrollWidth) {
            featuredContainer.scrollLeft = 0;
          }
        }, 1000);

        setInterval(() => {
          profileContainer.scrollLeft += 170;
          if (profileContainer.scrollLeft + profileContainer.clientWidth >= profileContainer.scrollWidth) {
            profileContainer.scrollLeft = 0;
          }
        }, 1000);

      } catch (e) {
        console.error("Failed to load profiles.json", e);
      }
    }

    loadProfiles();
  </script>

</body>
</html>
